/**
* 실시간 방문자 통계 및 인기 게시글 로드
* Cloudflare Worker API에서 데이터를 가져옵니다.
*/

(function() {
/* Cloudflare Worker URL */
const WORKER_URL = '{{ site.analytics_worker_url | default: "" }}';

if (!WORKER_URL) {
return;
}

/* 방문자 통계 로드 */
fetch(WORKER_URL + '/api/stats')
.then(function(response) { return response.json(); })
.then(function(data) {
var todayEl = document.getElementById('today-visitors');
var totalEl = document.getElementById('total-visitors');

if (todayEl) {
todayEl.textContent = data.todayVisitors.toLocaleString();
}
if (totalEl) {
totalEl.textContent = data.totalVisitors.toLocaleString();
}
})
.catch(function() {});
})();